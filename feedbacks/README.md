# Документация API — Отзывы (feedbacks)

Эндпоинты для работы с отзывами клиентов о заведениях.

---

## Аутентификация и роли
- Используется токен-аутентификация (`Authorization: Token <token>`)
- Оставлять отзывы может только пользователь с ролью `client`.
- Просматривать список отзывов может только пользователь с ролью `manager`.

---

## Создать отзыв (клиент)
POST `/api/feedbacks/create/`

Заголовки:
```
Authorization: Token <token>
Content-Type: application/json
```

Тело запроса:
```json
{
  "coffee_shop_id": 1,
  "type": "service",
  "text": "Очень вкусный латте, спасибо!"
}
```

Поля:
- `coffee_shop_id` — ID заведения (обязателен)
- `type` — тип отзыва (обязателен). Допустимые значения: `idea` (предложение идеи), `service` (об обслуживании)
- `text` — текст отзыва (обязателен)

Ответ (201):
```json
{ "success": "Отзыв сохранён", "id": 12 }
```

Ошибки:
- 403 — не клиент: `{ "error": "Доступ только для клиентов" }`
- 400 — неверные данные (например, `coffee_shop_id` не существует)

---

## Список отзывов (управляющий)
GET `/api/feedbacks/`

Опциональные параметры:
- `coffee_shop_id` — фильтрация по ID заведения
- `type` — фильтрация по типу (`idea` | `service`)

Заголовки:
```
Authorization: Token <token>
```

Ответ (200):
```json
[
  {
    "id": 12,
    "type": "service",
    "text": "Очень вкусный латте, спасибо!",
    "created_at": "2025-08-12T10:40:00Z",
    "user": { "id": 45, "phone": "+996500000001", "first_name": "Айбек", "last_name": "Канатбеков" },
    "coffee_shop": { "id": 1, "name": "Кофейня на Ленина" }
  }
]
```

Ошибки:
- 403 — не управляющий: `{ "error": "Доступ только для управляющего" }`

---

## Примечания
- Поле `created_at` — ISO 8601.
- Эндпоинты подключены под префиксом `/api/` в `backend/urls.py`.
